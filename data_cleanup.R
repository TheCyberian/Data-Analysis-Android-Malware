---
title: "data_cleanup.R"
author: "Utkarsh Raghav"
---
#### Handling Required Packages
# if(!require(<package-name>)) install.packages(<package-name>) 
# checks for the package in system; if not found, then installs and loads/attaches it.
if(!require("hrbrthemes")) install.packages("hrbrthemes")
if(!require("viridis")) install.packages("viridis")
if(!require("ggrepel")) install.packages("ggrepel")
if(!require("reshape2")) install.packages("reshape2")
if(!require("tidyverse")) install.packages("tidyverse")

### Android Permissions
# Loading & Exploration csv data into data frame
df_android_permissions <- read_delim("archive/train.csv", delim=';')

### Exploring the data sets
head(df_android_permissions)

summary(df_android_permissions)

### Shape/Dimensions of data set
dim(df_android_permissions)
sum(df_android_permissions)
colnames(df_android_permissions)

# Data transformations and cleaning
df_man <- rowsum(x=df_android_permissions, group=df_android_permissions$type)

# Converting columns to rows
molten_data = melt(df_man, id.vars = c("type"), level=1)
molten_data

# Updating Labels
molten_data$type[which(molten_data$type == 199)] <- "malicious"
molten_data$type[which(molten_data$type == 0)] <- "benign"

### Removing unnecessary data entries
cleaned_data = subset(
  molten_data, variable!='android' & 
    variable != 'test_permission' & 
    value != 0)

view(cleaned_data)

### Sorted permissions data
sorted_data <- cleaned_data[order(-cleaned_data$value),]



### Android Network traffic
# Loading & Exploration csv data into dataframe
df_android_net_traffic <- read_delim("archive/android_traffic.csv", delim=';')

### Exploring the data sets
head(df_android_net_traffic)

summary(df_android_net_traffic)

### Shape/Dimensions of data set
dim(df_android_net_traffic)
colnames(df_android_net_traffic)

# Checking for NA values
plyr::count(is.na(df_android_net_traffic))

# Getting column names for NA values
colnames(df_android_net_traffic)[plyr::count(is.na(df_android_net_traffic)) > 0]

# Dropping the columns with NA values identified in last step
cleaned_data_net_traffic = subset(df_android_net_traffic, select = -c(duration,avg_local_pkt_rate,avg_remote_pkt_rate))
